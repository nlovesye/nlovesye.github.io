(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["车型管理"],{"093f":function(e,t,a){"use strict";var n=a("b267");t["a"]=n["a"]},"0c4e":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page-basedata-cartype"},[a("Modal",{ref:"modalEdit",attrs:{title:e.modalTitle,loading:"","mask-closable":!1,draggable:!1,fullscreen:!1,width:"760"},on:{"on-ok":e.modalOk,"on-visible-change":e.modalChangeShow},model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[a("Form",{ref:"form",attrs:{model:e.modalData,rules:e.rules,inline:""}},[a("FormItem",{attrs:{prop:"carKindId",label:"选择车种","label-width":90,required:""}},[a("Select",{staticStyle:{width:"120px"},attrs:{placeholder:"车种",clearable:"","label-in-value":""},on:{"on-change":function(t){return e.bookHandleChange(t,"carKindName")}},model:{value:e.modalData.carKindId,callback:function(t){e.$set(e.modalData,"carKindId",t)},expression:"modalData.carKindId"}},e._l(e.cartypeBook,function(e){return a("Option",{key:e.id,attrs:{value:e.id,label:e.title}})}))],1),a("FormItem",{attrs:{prop:"lengthOrWeight",label:"车长/车重","label-width":90,required:""}},[a("InputNumber",{attrs:{min:0},on:{"on-change":e.numberHandleChange},model:{value:e.modalData.lengthOrWeight,callback:function(t){e.$set(e.modalData,"lengthOrWeight",t)},expression:"modalData.lengthOrWeight"}})],1),a("FormItem",{attrs:{prop:"unitId","label-width":0,"show-message":!1}},[a("Select",{staticStyle:{width:"80px"},attrs:{placeholder:"",clearable:"","label-in-value":""},on:{"on-change":function(t){return e.bookHandleChange(t,"unitName")}},model:{value:e.modalData.unitId,callback:function(t){e.$set(e.modalData,"unitId",t)},expression:"modalData.unitId"}},e._l(e.cartypeUnitBook,function(e){return a("Option",{key:e.id,attrs:{value:e.id,label:e.title}})}))],1),a("FormItem",{attrs:{prop:"name",label:"车型结果","label-width":90,required:""}},[a("Input",{staticStyle:{width:"120px"},attrs:{disabled:"",placeholder:"车型结果"},model:{value:e.modalData.name,callback:function(t){e.$set(e.modalData,"name",t)},expression:"modalData.name"}})],1),a("FormItem",{attrs:{prop:"boxLength",label:"箱规格","label-width":90,required:""}},[a("InputNumber",{attrs:{min:0,placeholder:"长(L)"},model:{value:e.modalData.boxLength,callback:function(t){e.$set(e.modalData,"boxLength",t)},expression:"modalData.boxLength"}})],1),a("FormItem",{attrs:{prop:"boxWidth","label-width":0}},[a("InputNumber",{attrs:{min:0,placeholder:"宽(B)"},model:{value:e.modalData.boxWidth,callback:function(t){e.$set(e.modalData,"boxWidth",t)},expression:"modalData.boxWidth"}})],1),a("FormItem",{attrs:{prop:"boxHeight","label-width":0}},[a("InputNumber",{attrs:{min:0,placeholder:"高(H)"},model:{value:e.modalData.boxHeight,callback:function(t){e.$set(e.modalData,"boxHeight",t)},expression:"modalData.boxHeight"}})],1),a("FormItem",{attrs:{prop:"carLength",label:"车规格","label-width":90,required:""}},[a("InputNumber",{attrs:{min:0,placeholder:"长(L)"},model:{value:e.modalData.carLength,callback:function(t){e.$set(e.modalData,"carLength",t)},expression:"modalData.carLength"}})],1),a("FormItem",{attrs:{prop:"carHeight","label-width":0,required:""}},[a("InputNumber",{attrs:{min:0,placeholder:"高(H)"},model:{value:e.modalData.carHeight,callback:function(t){e.$set(e.modalData,"carHeight",t)},expression:"modalData.carHeight"}})],1),a("FormItem",{attrs:{prop:"maxWeight",label:"最大载重(t)","label-width":90}},[a("InputNumber",{staticStyle:{width:"120px"},attrs:{min:0,placeholder:""},model:{value:e.modalData.maxWeight,callback:function(t){e.$set(e.modalData,"maxWeight",t)},expression:"modalData.maxWeight"}})],1),a("FormItem",{attrs:{prop:"maxCapacity",label:"最大体积(m³)","label-width":90}},[a("InputNumber",{staticStyle:{width:"120px"},attrs:{min:0,placeholder:""},model:{value:e.modalData.maxCapacity,callback:function(t){e.$set(e.modalData,"maxCapacity",t)},expression:"modalData.maxCapacity"}})],1),a("FormItem",{attrs:{prop:"remark",label:"备注","label-width":90}},[a("Input",{staticStyle:{width:"180px"},attrs:{placeholder:""},model:{value:e.modalData.remark,callback:function(t){e.$set(e.modalData,"remark",t)},expression:"modalData.remark"}})],1)],1)],1),a("Row",{staticClass:"row",attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("Select",{attrs:{placeholder:"车种",clearable:""},on:{"on-change":e.getList},model:{value:e.carKindId,callback:function(t){e.carKindId=t},expression:"carKindId"}},e._l(e.cartypeBook,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v("\n          "+e._s(t.title)+"\n        ")])}))],1),a("Col",{attrs:{span:"6"}},[a("Input",{attrs:{search:"","enter-button":"",placeholder:"车型名称"},on:{"on-enter":e.getList,"on-search":e.getList},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1)],1),a("Row",{staticClass:"row",attrs:{type:"flex",justify:"space-between",align:"middle"}},[a("Col",{attrs:{span:"4"}},[a("h3",[e._v("车型列表")])]),a("Col",{staticClass:"col-btn",attrs:{span:"6"}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.showModal("add")}}},[a("Icon",{attrs:{type:"md-add"}}),e._v("\n        新建\n      ")],1),a("Poptip",{attrs:{confirm:"",title:"是否删除选中项？"},on:{"on-ok":function(t){e.deleteCartype(null,!0)}}},[a("Button",{attrs:{type:"error"}},[a("Icon",{attrs:{type:"ios-trash"}}),e._v("\n          删除\n        ")],1)],1)],1)],1),a("Table",{ref:"selection",attrs:{border:"",columns:e.cartypeColumns,data:e.cartypeList,width:"500px",loading:e.tbLoading},on:{"on-select":e.selectRow}},[a("Page",{attrs:{slot:"footer","class-name":"custom-page",total:e.pager.total,current:e.pager.current,"page-size":e.pager.pageSize,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize},slot:"footer"})],1)],1)},i=[],r=a("8afe"),o=(a("7f7f"),a("96cf"),a("3040")),s=a("c93e"),l=a("6079"),c=a("de10"),u=a("f2d8"),d=a("d842"),h=a("6be2"),p=a("6005"),m=a("01f8"),f=a("d3b2"),g=a("2d66"),b=a("093f"),v=a("311a"),w=a("6ead"),x=a("bbbe"),y=a("cf8e"),k=a("2f62"),D={components:{Table:y["a"],Row:x["a"],Col:w["a"],Select:v["a"],Option:b["a"],Input:g["a"],Icon:f["a"],Button:m["a"],Page:p["a"],Modal:h["a"],Form:d["a"],FormItem:u["a"],InputNumber:c["a"],Poptip:l["a"]},data:function(){var e=this;return{tbLoading:!1,cartypeColumns:[{type:"selection",fixed:"left",width:40,align:"center"},{type:"index",fixed:"left",width:60,align:"center",title:"序号"},{title:"车型名称",key:"name",ellipsis:!0,minWidth:150},{title:"车种",key:"carKindName",ellipsis:!0,minWidth:150},{title:"箱规格(L*B*H)",key:"boxLength",ellipsis:!0,minWidth:150,render:function(e,t){var a=t.row;return e("div","".concat(a.boxLength,"*").concat(a.boxWidth,"*").concat(a.boxHeight))}},{title:"车规格(L*H)",key:"carLength",ellipsis:!0,minWidth:150,render:function(e,t){var a=t.row;return e("div","".concat(a.carLength,"*").concat(a.carHeight))}},{title:"最大载重(t)",key:"maxWeight",ellipsis:!0,minWidth:150},{title:"最大体积(m³)",key:"maxCapacity",ellipsis:!0,minWidth:150},{className:"action",title:"操作",fixed:"right",key:"action",width:150,align:"center",render:function(t,a){return t("div",[t("span",{class:"btn",on:{click:function(){e.showModal("edit",a.row)}}},"编辑"),t("Poptip",{props:{confirm:!0,transfer:!0,title:"是否删除？",placement:"top","popper-class":"pop-del"},on:{"on-ok":function(){var t=a.row;e.deleteCartype(t,!1)}}},[t("span",{class:"btn"},"删除")])])}}],cartypeList:[],cartypeBook:[],cartypeUnitBook:[],pager:{current:1,total:0,pageSize:10},selectRows:[],modalShow:!1,modalTitle:"新建车型",modalData:{carKindId:null,carKindName:"",lengthOrWeight:null,unitId:null,unitName:"",name:"",boxLength:null,boxWidth:null,boxHeight:null,carLength:null,carHeight:null,maxWeight:null,maxCapacity:null,remark:""},carKindId:null,name:"",rules:{carKindId:[{required:!0,type:"number",message:"请选择车种",trigger:"change"}],lengthOrWeight:[{required:!0,type:"number",message:"填写车长/车重",trigger:"change"}],unitId:[{required:!0,type:"number",message:"填写选择单位",trigger:"change"}],name:[{required:!0,message:"无车型结果",trigger:"change"}],boxLength:[{required:!0,type:"number",message:"请填写箱长",trigger:"change"}],boxWidth:[{required:!0,type:"number",message:"请填写箱宽",trigger:"change"}],boxHeight:[{required:!0,type:"number",message:"请填写箱高",trigger:"change"}],carLength:[{required:!0,type:"number",message:"请填写车长",trigger:"change"}],carHeight:[{required:!0,type:"number",message:"请填写车高",trigger:"change"}]}}},methods:Object(s["a"])({},Object(k["b"])(["findBook","getBookList"]),{init:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.getList(),e.next=3,this.getBookList({oAxios:this.oAxios,target:"车种"});case 3:return this.cartypeBook=e.sent,e.next=6,this.getBookList({oAxios:this.oAxios,target:"车辆计量单位"});case 6:this.cartypeUnitBook=e.sent;case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.tbLoading=!0,t={limit:this.pager.pageSize,offset:(this.pager.current-1)*this.pager.pageSize,carKindId:this.carKindId,name:this.name},e.next=4,this.oAxios.post("/common/carType/getCarTypes",t);case 4:a=e.sent,this.cartypeList=Object(r["a"])(a.data.list),this.pager.total=a.data.total,this.tbLoading=!1;case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),changePage:function(e){this.pager.current=e,this.getList()},changePageSize:function(e){this.pager.pageSize=e,this.getList()},showModal:function(e,t){"edit"===e?(this.modalData=Object(s["a"])({},t),this.modalTitle="编辑车型"):this.modalTitle="新建车型",this.modalShow=!0},modalChangeShow:function(e){e||this.$refs.form.resetFields()},modalOk:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,a,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$refs.form.validate();case 2:if(t=e.sent,t){e.next=6;break}return this.$refs.modalEdit.buttonLoading=!1,e.abrupt("return");case 6:return a=Object(s["a"])({},this.modalData),e.prev=7,e.next=10,this.oAxios.post("/common//carType/save",a);case 10:n=e.sent,n.success?(this.getList(),this.$Message.success("操作成功"),this.modalShow=!1):(this.$Message.error("操作失败"),this.modalShow=!1),e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](7),this.modalShow=!1;case 17:case"end":return e.stop()}},e,this,[[7,14]])}));return function(){return e.apply(this,arguments)}}(),bookHandleChange:function(e,t){if(this.modalData[t]=e&&e.label?e.label:null,"carKindName"===t||"unitName"===t){var a=this.modalData,n=a.carKindName,i=a.unitName,r=a.lengthOrWeight;this.modalData.name=n&&i&&r?"".concat(r).concat(i).concat(n):""}},numberHandleChange:function(e){var t=this.modalData,a=t.carKindName,n=t.unitName;this.modalData.name=a&&n?"".concat(e).concat(n).concat(a):""},deleteCartype:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t,a){var n,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!(a&&this.selectRows.length<1)){e.next=2;break}return e.abrupt("return");case 2:n=a?this.selectRows.map(function(e){return e.id}):[t.id],this.oAxios.post("/common/carType/delete",n).then(function(e){i.$Message.success("操作成功"),i.getList()}).catch(function(){i.$Message.error("操作失败")});case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),selectRow:function(e,t){this.selectRows=Object(r["a"])(e)}}),mounted:function(){this.init()}},I=D,C=(a("8ded"),a("2877")),N=Object(C["a"])(I,n,i,!1,null,null,null);N.options.__file="Index.vue";t["default"]=N.exports},"311a":function(e,t,a){"use strict";var n=a("3148"),i=(a("b267"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("li",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!hidden"}],class:[e.prefixCls+"-wrap"]},[a("div",{class:[e.prefixCls+"-title"]},[e._v(e._s(e.label))]),a("ul",[a("li",{ref:"options",class:[e.prefixCls]},[e._t("default")],2)])])}),r=[],o="ivu-select-group",s={name:"OptionGroup",props:{label:{type:String,default:""}},data:function(){return{prefixCls:o,hidden:!1}},methods:{queryChange:function(){var e=this;this.$nextTick(function(){for(var t=e.$refs.options.querySelectorAll(".ivu-select-item"),a=!1,n=0;n<t.length;n++)if("none"!==t[n].style.display){a=!0;break}e.hidden=!a})}},mounted:function(){var e=this;this.$on("on-query-change",function(){return e.queryChange(),!0})}},l=s,c=a("2877"),u=Object(c["a"])(l,i,r,!1,null,null,null);u.options.__file="option-group.vue";u.exports,t["a"]=n["a"]},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"3dfe":function(e,t,a){},"6b54":function(e,t,a){"use strict";a("3846");var n=a("cb7c"),i=a("0bfb"),r=a("9e1e"),o="toString",s=/./[o],l=function(e){a("2aba")(RegExp.prototype,o,e,!0)};a("79e5")(function(){return"/a/b"!=s.call({source:"a",flags:"b"})})?l(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!r&&e instanceof RegExp?i.call(e):void 0)}):s.name!=o&&l(function(){return s.call(this)})},"8ded":function(e,t,a){"use strict";var n=a("3dfe"),i=a.n(n);i.a},de10:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{class:e.wrapClasses},[a("div",{class:e.handlerClasses},[a("a",{class:e.upClasses,on:{click:e.up}},[a("span",{class:e.innerUpClasses,on:{click:e.preventDefault}})]),a("a",{class:e.downClasses,on:{click:e.down}},[a("span",{class:e.innerDownClasses,on:{click:e.preventDefault}})])]),a("div",{class:e.inputWrapClasses},[a("input",{class:e.inputClasses,attrs:{id:e.elementId,disabled:e.disabled,autocomplete:"off",spellcheck:"false",autofocus:e.autofocus,readonly:e.readonly||!e.editable,name:e.name,placeholder:e.placeholder},domProps:{value:e.formatterValue},on:{focus:e.focus,blur:e.blur,keydown:function(t){return t.stopPropagation(),e.keyDown(t)},input:e.change,mouseup:e.preventDefault,change:e.change}})])])},i=[],r=(a("4917"),a("a322")),o=(a("c5f6"),a("6b54"),a("28a5"),a("cd51")),s=a("3670"),l="ivu-input-number",c="ivu-icon";function u(e,t){var a,n,i;try{a=e.toString().split(".")[1].length}catch(e){a=0}try{n=t.toString().split(".")[1].length}catch(e){n=0}return i=Math.pow(10,Math.max(a,n)),(Math.round(e*i)+Math.round(t*i))/i}var d={name:"InputNumber",mixins:[s["a"]],props:{max:{type:Number,default:1/0},min:{type:Number,default:-1/0},step:{type:Number,default:1},activeChange:{type:Boolean,default:!0},value:{type:Number,default:1},size:{validator:function(e){return Object(o["l"])(e,["small","large","default"])},default:function(){return this.$IVIEW&&""!==this.$IVIEW.size?this.$IVIEW.size:"default"}},disabled:{type:Boolean,default:!1},autofocus:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},name:{type:String},precision:{type:Number},elementId:{type:String},formatter:{type:Function},parser:{type:Function},placeholder:{type:String,default:""}},data:function(){return{focused:!1,upDisabled:!1,downDisabled:!1,currentValue:this.value}},computed:{wrapClasses:function(){var e;return["".concat(l),(e={},Object(r["a"])(e,"".concat(l,"-").concat(this.size),!!this.size),Object(r["a"])(e,"".concat(l,"-disabled"),this.disabled),Object(r["a"])(e,"".concat(l,"-focused"),this.focused),e)]},handlerClasses:function(){return"".concat(l,"-handler-wrap")},upClasses:function(){return["".concat(l,"-handler"),"".concat(l,"-handler-up"),Object(r["a"])({},"".concat(l,"-handler-up-disabled"),this.upDisabled)]},innerUpClasses:function(){return"".concat(l,"-handler-up-inner ").concat(c," ").concat(c,"-ios-arrow-up")},downClasses:function(){return["".concat(l,"-handler"),"".concat(l,"-handler-down"),Object(r["a"])({},"".concat(l,"-handler-down-disabled"),this.downDisabled)]},innerDownClasses:function(){return"".concat(l,"-handler-down-inner ").concat(c," ").concat(c,"-ios-arrow-down")},inputWrapClasses:function(){return"".concat(l,"-input-wrap")},inputClasses:function(){return"".concat(l,"-input")},precisionValue:function(){return this.currentValue&&this.precision?this.currentValue.toFixed(this.precision):this.currentValue},formatterValue:function(){return this.formatter&&null!==this.precisionValue?this.formatter(this.precisionValue):this.precisionValue}},methods:{preventDefault:function(e){e.preventDefault()},up:function(e){var t=Number(e.target.value);if(this.upDisabled&&isNaN(t))return!1;this.changeStep("up",e)},down:function(e){var t=Number(e.target.value);if(this.downDisabled&&isNaN(t))return!1;this.changeStep("down",e)},changeStep:function(e,t){if(this.disabled||this.readonly)return!1;var a=Number(t.target.value),n=Number(this.currentValue),i=Number(this.step);if(isNaN(n))return!1;if(!isNaN(a))if("up"===e){if(!(u(a,i)<=this.max))return!1;n=a}else if("down"===e){if(!(u(a,-i)>=this.min))return!1;n=a}"up"===e?n=u(n,i):"down"===e&&(n=u(n,-i)),this.setValue(n)},setValue:function(e){var t=this;e&&!isNaN(this.precision)&&(e=Number(Number(e).toFixed(this.precision)));var a=this.min,n=this.max;null!==e&&(e>n?e=n:e<a&&(e=a)),this.$nextTick(function(){t.currentValue=e,t.$emit("input",e),t.$emit("on-change",e),t.dispatch("FormItem","on-form-change",e)})},focus:function(e){this.focused=!0,this.$emit("on-focus",e)},blur:function(){this.focused=!1,this.$emit("on-blur"),Object(o["g"])(this,["DatePicker","TimePicker","Cascader","Search"])||this.dispatch("FormItem","on-form-blur",this.currentValue)},keyDown:function(e){38===e.keyCode?(e.preventDefault(),this.up(e)):40===e.keyCode&&(e.preventDefault(),this.down(e))},change:function(e){if("input"!=e.type||this.activeChange){var t=e.target.value.trim();this.parser&&(t=this.parser(t));var a=0===t.length;a?this.setValue(null):"input"==e.type&&t.match(/^\-?\.?$|\.$/)||(t=Number(t),isNaN(t)?e.target.value=this.currentValue:(this.currentValue=t,this.setValue(t)))}},changeVal:function(e){if(e=Number(e),isNaN(e))this.upDisabled=!0,this.downDisabled=!0;else{var t=this.step;this.upDisabled=e+t>this.max,this.downDisabled=e-t<this.min}}},mounted:function(){this.changeVal(this.currentValue)},watch:{value:function(e){this.currentValue=e},currentValue:function(e){this.changeVal(e)},min:function(){this.changeVal(this.currentValue)},max:function(){this.changeVal(this.currentValue)}}},h=d,p=a("2877"),m=Object(p["a"])(h,n,i,!1,null,null,null);m.options.__file="input-number.vue";var f=m.exports;t["a"]=f}}]);
//# sourceMappingURL=车型管理.9355c3dc.js.map