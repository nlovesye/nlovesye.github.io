(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["视图注册"],{1158:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("label",{class:e.wrapClasses},[n("span",{class:e.checkboxClasses},[n("span",{class:e.innerClasses}),e.group?n("input",{directives:[{name:"model",rawName:"v-model",value:e.model,expression:"model"}],class:e.inputClasses,attrs:{type:"checkbox",disabled:e.disabled,name:e.name},domProps:{value:e.label,checked:Array.isArray(e.model)?e._i(e.model,e.label)>-1:e.model},on:{change:[function(t){var n=e.model,a=t.target,i=!!a.checked;if(Array.isArray(n)){var r=e.label,s=e._i(n,r);a.checked?s<0&&(e.model=n.concat([r])):s>-1&&(e.model=n.slice(0,s).concat(n.slice(s+1)))}else e.model=i},e.change],focus:e.onFocus,blur:e.onBlur}}):n("input",{class:e.inputClasses,attrs:{type:"checkbox",disabled:e.disabled,name:e.name},domProps:{checked:e.currentValue},on:{change:e.change,focus:e.onFocus,blur:e.onBlur}})]),e._t("default",[e.showSlot?n("span",[e._v(e._s(e.label))]):e._e()])],2)},i=[],r=n("a322"),s=(n("c5f6"),n("cd51")),c=n("3670"),o="ivu-checkbox",d={name:"Checkbox",mixins:[c["a"]],props:{disabled:{type:Boolean,default:!1},value:{type:[String,Number,Boolean],default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1},label:{type:[String,Number,Boolean]},indeterminate:{type:Boolean,default:!1},size:{validator:function(e){return Object(s["l"])(e,["small","large","default"])},default:function(){return this.$IVIEW&&""!==this.$IVIEW.size?this.$IVIEW.size:"default"}},name:{type:String}},data:function(){return{model:[],currentValue:this.value,group:!1,showSlot:!0,parent:Object(s["g"])(this,"CheckboxGroup"),focusInner:!1}},computed:{wrapClasses:function(){var e;return["".concat(o,"-wrapper"),(e={},Object(r["a"])(e,"".concat(o,"-group-item"),this.group),Object(r["a"])(e,"".concat(o,"-wrapper-checked"),this.currentValue),Object(r["a"])(e,"".concat(o,"-wrapper-disabled"),this.disabled),Object(r["a"])(e,"".concat(o,"-").concat(this.size),!!this.size),e)]},checkboxClasses:function(){var e;return["".concat(o),(e={},Object(r["a"])(e,"".concat(o,"-checked"),this.currentValue),Object(r["a"])(e,"".concat(o,"-disabled"),this.disabled),Object(r["a"])(e,"".concat(o,"-indeterminate"),this.indeterminate),e)]},innerClasses:function(){return["".concat(o,"-inner"),Object(r["a"])({},"".concat(o,"-focus"),this.focusInner)]},inputClasses:function(){return"".concat(o,"-input")}},mounted:function(){this.parent=Object(s["g"])(this,"CheckboxGroup"),this.parent&&(this.group=!0),this.group?this.parent.updateModel(!0):(this.updateModel(),this.showSlot=void 0!==this.$slots.default)},methods:{change:function(e){if(this.disabled)return!1;var t=e.target.checked;this.currentValue=t;var n=t?this.trueValue:this.falseValue;this.$emit("input",n),this.group?this.parent.change(this.model):(this.$emit("on-change",n),this.dispatch("FormItem","on-form-change",n))},updateModel:function(){this.currentValue=this.value===this.trueValue},onBlur:function(){this.focusInner=!1},onFocus:function(){this.focusInner=!0}},watch:{value:function(e){if(e!==this.trueValue&&e!==this.falseValue)throw"Value should be trueValue or falseValue.";this.updateModel()}}},l=d,u=n("2877"),h=Object(u["a"])(l,a,i,!1,null,null,null);h.options.__file="checkbox.vue";t["a"]=h.exports},"1a60":function(e,t,n){},"317c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"page-system-viewsregister"},[n("Tree",{staticClass:"menu-tree",attrs:{data:e.treeList,render:e.renderTree}})],1)},i=[],r=(n("7f7f"),n("96cf"),n("3040")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.prefixCls},[e._l(e.stateTree,function(t,a){return n("Tree-node",{key:a,attrs:{data:t,visible:"",multiple:e.multiple,"show-checkbox":e.showCheckbox,"children-key":e.childrenKey}})}),e.stateTree.length?e._e():n("div",{class:[e.prefixCls+"-empty"]},[e._v(e._s(e.localeEmptyText))])],2)},c=[],o=(n("20d6"),n("ac6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("collapse-transition",[n("ul",{class:e.classes},[n("li",[n("span",{class:e.arrowClasses,on:{click:e.handleExpand}},[e.showArrow?n("Icon",{attrs:{type:"ios-arrow-forward"}}):e._e(),e.showLoading?n("Icon",{staticClass:"ivu-load-loop",attrs:{type:"ios-loading"}}):e._e()],1),e.showCheckbox?n("Checkbox",{attrs:{value:e.data.checked,indeterminate:e.data.indeterminate,disabled:e.data.disabled||e.data.disableCheckbox},nativeOn:{click:function(t){return t.preventDefault(),e.handleCheck(t)}}}):e._e(),e.data.render?n("Render",{attrs:{render:e.data.render,data:e.data,node:e.node}}):e.isParentRender?n("Render",{attrs:{render:e.parentRender,data:e.data,node:e.node}}):n("span",{class:e.titleClasses,on:{click:e.handleSelect}},[e._v(e._s(e.data.title))]),e._l(e.children,function(t,a){return e.data.expand?n("Tree-node",{key:a,attrs:{data:t,multiple:e.multiple,"show-checkbox":e.showCheckbox,"children-key":e.childrenKey}}):e._e()})],2)])])}),d=[],l=(n("7514"),n("a322")),u=n("1158"),h=n("2748"),p={name:"RenderCell",functional:!0,props:{render:Function,data:Object,node:Array},render:(e,t)=>{const n={root:t.props.node[0],node:t.props.node[1],data:t.props.data};return t.props.render(e,n)}},f=n("1e8e"),m=n("3670"),b=n("cd51"),y="ivu-tree",v={name:"TreeNode",mixins:[m["a"]],components:{Checkbox:u["a"],Icon:h["a"],CollapseTransition:f["a"],Render:p},props:{data:{type:Object,default:function(){return{}}},multiple:{type:Boolean,default:!1},childrenKey:{type:String,default:"children"},showCheckbox:{type:Boolean,default:!1}},data:function(){return{prefixCls:y}},computed:{classes:function(){return["".concat(y,"-children")]},selectedCls:function(){return[Object(l["a"])({},"".concat(y,"-node-selected"),this.data.selected)]},arrowClasses:function(){var e;return["".concat(y,"-arrow"),(e={},Object(l["a"])(e,"".concat(y,"-arrow-disabled"),this.data.disabled),Object(l["a"])(e,"".concat(y,"-arrow-open"),this.data.expand),e)]},titleClasses:function(){return["".concat(y,"-title"),Object(l["a"])({},"".concat(y,"-title-selected"),this.data.selected)]},showArrow:function(){return this.data[this.childrenKey]&&this.data[this.childrenKey].length||"loading"in this.data&&!this.data.loading},showLoading:function(){return"loading"in this.data&&this.data.loading},isParentRender:function(){var e=Object(b["g"])(this,"Tree");return e&&e.render},parentRender:function(){var e=Object(b["g"])(this,"Tree");return e&&e.render?e.render:null},node:function(){var e=this,t=Object(b["g"])(this,"Tree");return t?[t.flatState,t.flatState.find(function(t){return t.nodeKey===e.data.nodeKey})]:[]},children:function(){return this.data[this.childrenKey]}},methods:{handleExpand:function(){var e=this,t=this.data;if(!t.disabled){if(0===t[this.childrenKey].length){var n=Object(b["g"])(this,"Tree");if(n&&n.loadData)return this.$set(this.data,"loading",!0),void n.loadData(t,function(t){e.$set(e.data,"loading",!1),t.length&&(e.$set(e.data,e.childrenKey,t),e.$nextTick(function(){return e.handleExpand()}))})}t[this.childrenKey]&&t[this.childrenKey].length&&(this.$set(this.data,"expand",!this.data.expand),this.dispatch("Tree","toggle-expand",this.data))}},handleSelect:function(){this.data.disabled||this.dispatch("Tree","on-selected",this.data.nodeKey)},handleCheck:function(){if(!this.data.disabled){var e={checked:!this.data.checked&&!this.data.indeterminate,nodeKey:this.data.nodeKey};this.dispatch("Tree","on-check",e)}}}},g=v,k=n("2877"),x=Object(k["a"])(g,o,d,!1,null,null,null);x.options.__file="node.vue";var w=x.exports,T=n("f60a"),C="ivu-tree",S={name:"Tree",mixins:[m["a"],T["a"]],components:{TreeNode:w},props:{data:{type:Array,default:function(){return[]}},multiple:{type:Boolean,default:!1},showCheckbox:{type:Boolean,default:!1},emptyText:{type:String},childrenKey:{type:String,default:"children"},loadData:{type:Function},render:{type:Function}},data:function(){return{prefixCls:C,stateTree:this.data,flatState:[]}},watch:{data:{deep:!0,handler:function(){this.stateTree=this.data,this.flatState=this.compileFlatState(),this.rebuildTree()}}},computed:{localeEmptyText:function(){return"undefined"===typeof this.emptyText?this.t("i.tree.emptyText"):this.emptyText}},methods:{compileFlatState:function(){var e=0,t=this.childrenKey,n=[];function a(i,r){i.nodeKey=e++,n[i.nodeKey]={node:i,nodeKey:i.nodeKey},"undefined"!=typeof r&&(n[i.nodeKey].parent=r.nodeKey,n[r.nodeKey][t].push(i.nodeKey)),i[t]&&(n[i.nodeKey][t]=[],i[t].forEach(function(e){return a(e,i)}))}return this.stateTree.forEach(function(e){a(e)}),n},updateTreeUp:function(e){var t=this.flatState[e].parent;if("undefined"!=typeof t){var n=this.flatState[e].node,a=this.flatState[t].node;n.checked==a.checked&&n.indeterminate==a.indeterminate||(1==n.checked?(this.$set(a,"checked",a[this.childrenKey].every(function(e){return e.checked})),this.$set(a,"indeterminate",!a.checked)):(this.$set(a,"checked",!1),this.$set(a,"indeterminate",a[this.childrenKey].some(function(e){return e.checked||e.indeterminate}))),this.updateTreeUp(t))}},rebuildTree:function(){var e=this,t=this.getCheckedNodes();t.forEach(function(t){e.updateTreeDown(t,{checked:!0});var n=e.flatState[t.nodeKey].parent;if(n||0===n){var a=e.flatState[n].node,i="undefined"!=typeof t.checked&&t.checked;i&&a.checked!=t.checked&&e.updateTreeUp(t.nodeKey)}})},getSelectedNodes:function(){return this.flatState.filter(function(e){return e.node.selected}).map(function(e){return e.node})},getCheckedNodes:function(){return this.flatState.filter(function(e){return e.node.checked}).map(function(e){return e.node})},updateTreeDown:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var a in n)this.$set(e,a,n[a]);e[this.childrenKey]&&e[this.childrenKey].forEach(function(e){t.updateTreeDown(e,n)})},handleSelect:function(e){var t=this.flatState[e].node;if(!this.multiple){var n=this.flatState.findIndex(function(e){return e.node.selected});n>=0&&n!==e&&this.$set(this.flatState[n].node,"selected",!1)}this.$set(t,"selected",!t.selected),this.$emit("on-select-change",this.getSelectedNodes())},handleCheck:function(e){var t=e.checked,n=e.nodeKey,a=this.flatState[n].node;this.$set(a,"checked",t),this.$set(a,"indeterminate",!1),this.updateTreeUp(n),this.updateTreeDown(a,{checked:t,indeterminate:!1}),this.$emit("on-check-change",this.getCheckedNodes())}},created:function(){this.flatState=this.compileFlatState(),this.rebuildTree()},mounted:function(){var e=this;this.$on("on-check",this.handleCheck),this.$on("on-selected",this.handleSelect),this.$on("toggle-expand",function(t){return e.$emit("on-toggle-expand",t)})}},K=S,_=Object(k["a"])(K,s,c,!1,null,null,null);_.options.__file="tree.vue";var $=_.exports,O=$,j=n("c93e"),V=n("2f62"),E={data:function(){return{treeList:[{id:-1,name:"FRD",depth:-1,children:[]}]}},computed:Object(j["a"])({},Object(V["c"])(["base"])),components:{Tree:O},methods:{getTreeList:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.oAxios.get("/account/permission/list");case 3:t=e.sent,this.treeList[0].children=t.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),this.treeList[0].children=[];case 10:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),renderTree:function(e,t){var n=this,a=t.root,i=t.node,r=t.data,s="view"!==r.type,c=-1!==r.id&&"view"!==r.type;return e("span",{style:{display:"inline-block",padding:"4px 8px",width:"100%"}},[e("span",{style:{}},r.name),e("span",{style:{display:"inline-block",float:"right",padding:"0 4px"}},[s?e("Button",{props:{type:"default",size:"small",icon:"ios-add"},on:{click:function(){n.addLevel(r)}}}):null,c?e("Button",{style:{marginLeft:"8px"},props:{type:"default",size:"small",icon:"ios-remove"},on:{click:function(){n.removeLevel(a,i,r)}}}):null])])},addLevel:function(e){console.log("add",e)},removeLevel:function(e,t,n){console.log("remove",e,t,n)},init:function(){this.getTreeList()}},mounted:function(){this.init()}},I=E,B=(n("abcb"),Object(k["a"])(I,a,i,!1,null,null,null));B.options.__file="Index.vue";t["default"]=B.exports},7514:function(e,t,n){"use strict";var a=n("5ca1"),i=n("0a49")(5),r="find",s=!0;r in[]&&Array(1)[r](function(){s=!1}),a(a.P+a.F*s,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(r)},abcb:function(e,t,n){"use strict";var a=n("1a60"),i=n.n(a);i.a}}]);
//# sourceMappingURL=视图注册.53caeafe.js.map